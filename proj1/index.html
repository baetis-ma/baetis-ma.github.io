<!DOCTYPE html>
<html>
   <head>
      <title>Simple Web page</title>
      <style>
        h1 {color:Brown; text-align:center; }
        p {color:SaddleBrown;}
        #intro { float:right;width:75%;margin-left:50px;margin-right:100px; 
                 font-size:large; }
        img { float:right;padding:15px;padding-right:40px;}
        #rside { position:absolute;top:20%; }

      </style>
   </head>
   <body>

   <h1>Simple Web Page</h1>
   <div id="intro">
      <img src="./helloworld.png" style="width:40%">
      <p> 
      This repository was prerelease tested on a ESP32-S with the current version of the esp-idf 
      design environment and on a ESP8266 D1-mini module the current version of the ESP8266_RTOS_SDK
      environment.
      The tcp socket in the esp handles four HTTP request headers :
      <ul><li>No url path reults in index.html file on esp being broken up 
              and forwared to browser</li>
          <li>url path 'index.html' reults in index.html file on esp being broken up 
              and forwared to browser</li>
          <li>url path 'getData' reults in function call to GetData() in esp-website.c, queries are
              also forwarded to function for parsing.</li>
      </ul>
      </p>
      <p>Any files you want down loaded will require editting the tcp_server_tasks() function and
      adding the file to main/component.mk file. In the code just copy the code iblock responding to
      index.html and replace the codition staement and the asm tag name ptrs.</p>
      </p>
      <p>
      The GetData() function provides a simple way to transfer information between the browser and the
      esp server. Data transfered from the browser can include state of buttons, or data from text
      fields. A javascript function running in a 200ms setInterval loop can transfer user settings
      and listen for a packet containing updated measuremnt data from the esp32 and it's periferals.
      </p>
      <p>
      This project is not very useful in itself but can be used for a framework for more complicated 
      projects.
      </p>
      <p>
      <h3>Setup machine for build</h3>
      </p>
      <p>
      There are plenty of sites on the web to get you up end running with esp-idf, this is an official 
      <a href="https://docs.espressif.com/projects/esp-idf/en/latest/get-started/">
      getting started guide</a> that steered me through. A few lines down in the Setup Toolchain area
      you can pick options for windows, linux or mac os. Next go to what you want to be your working 
      directory and download repository and setup directory environment depenancies : 
      <ul><li>git clone https://github.com/baetis-ma/esp32-idf-website</li>
          <li>export PATH="$PATH:$HOME/esp32/xtensa-esp32-elf/bin"</li>
          <li>export IDF_PATH=~/esp32/esp-idf</li>
      </ul>
      or for the esp8266
      <ul><li>export IDF_PATH=~/esp8266/ESP8266_RTOS_SDK</li>
          <li>export PATH=$PATH:~/esp8266/xtensa-lx106-elf/bin</li>
      </ul>
      Make sure to either add your user to dialout i(perminate) or chmod 666 /dev/ttyUSB0.
      </p>
      <p>
      Move into the esp32-idf-website and type make menuconfig. You can set the tty port and 
      change the download speed here to 921600 baud on the esp32 but the esp8266 worked at 
      115200 baud. 'make flash monitor' will build, download, exectute and monitor the esp.
      In the monitor look for the station ip address and type that into a browser. Test out adding
      /index.html or getData or getData?a=1234 as a path. A path not identified will 404.

      </p>
      <p>
      These build instructions are for linux, but I understand can also apply to windows systems
      running a virtual os.
      </p>
   </div>
         
   <ul id="rside">
      <a href="https://baetis-ma.github.io/index.html">baetis-ma HOME</a>
      <li> <p>This  repository</p>
          <a href="https://github.com/baetis-ma/esp32-idf-website">esp32-idf-website</a>
      <li> <p> My repositories</p>
          <a href="https://github.com/baetis-ma">github.com/baetis-ma</a></li>
      <li> <p> My e-mail<p>
          <a href="mailto:markwarren.ee@gmail.com">email</a></li>
   </ul> 
   </body>
</html>
